[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid
childlogdir=/var/log/supervisor

[unix_http_server]
file=/tmp/supervisor.sock

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix:///tmp/supervisor.sock

# Servidor principal QualityQuest en puerto 8000
[program:qualityquest]
command=python -m iso_standards_games
directory=/app
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/qualityquest.err.log
stdout_logfile=/var/log/supervisor/qualityquest.out.log
environment=PORT="8000",DEBUG="false"
priority=100

# Servidor RequirementRally en puerto 8001
[program:requirementrally]
command=python requirement_rally_server.py
directory=/app
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/requirementrally.err.log
stdout_logfile=/var/log/supervisor/requirementrally.out.log
environment=PORT="8001"
priority=200

# Servidor UsabilityUniverse en puerto 8003 (evita conflicto con 8002)
[program:usabilityuniverse]
command=python usability_universe_server.py
directory=/app
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/usabilityuniverse.err.log
stdout_logfile=/var/log/supervisor/usabilityuniverse.out.log
environment=PORT="8003"
priority=300

# Nginx como proxy reverso para combinar todos en puerto 8000
[program:nginx]
command=nginx -g "daemon off;"
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/nginx.err.log
stdout_logfile=/var/log/supervisor/nginx.out.log
priority=400